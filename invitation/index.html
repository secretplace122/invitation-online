<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ - InviteMaster</title>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —à—Ä–∏—Ñ—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π -->
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Great+Vibes&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Dancing+Script:wght@700&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet">

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/invitation.css">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="../js/firebase-config.js"></script>
</head>

<body>
    <div class="pattern-bg"></div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è) -->
    <nav class="navbar" style="background: rgba(255,255,255,0.8); backdrop-filter: blur(10px);">
        <div class="nav-container">
            <a href="/" class="logo">
                <span class="logo-icon">‚ú®</span>
                InviteMaster
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links" id="navLinks">
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/wedding/">–°–≤–∞–¥—å–±–∞</a>
                <a href="/birthday/">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</a>
                <a href="/other/">–î—Ä—É–≥–æ–µ</a>
            </div>
        </div>
    </nav>

    <main>
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div class="loading-spinner" id="loadingSpinner">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è...</p>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è -->
        <div class="invitation-wrapper" id="invitationWrapper" style="display: none;">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è -->
            <div class="invitation-content" id="invitationContent">
                <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            </div>

            <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="invitation-actions">
                <div class="actions-bar">
                    <button class="action-btn" id="copyLinkBtn">
                        <span class="material-symbols-outlined">link</span>
                        <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏ -->
        <div class="error-page" id="errorPage" style="display: none;">
            <div class="container">
                <div class="error-card">
                    <div class="error-icon">üòï</div>
                    <h2>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h2>
                    <p>–í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–æ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞</p>
                    <a href="/" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—ë –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</a>
                </div>
            </div>
        </div>
    </main>

    <script src="../js/script.js"></script>
    <script>
    // –ü–û–õ–£–ß–ê–ï–ú SLUG –ò–ó –•–ï–®–ê (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å /#slug)
    if (window.location.hash) {
        // –£–±–∏—Ä–∞–µ–º —Å–∏–º–≤–æ–ª # –∏ –ø–æ–ª—É—á–∞–µ–º slug
        window.invitationSlug = window.location.hash.substring(1);
        console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ slug –∏–∑ —Ö–µ—à–∞:', window.invitationSlug);
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç —Å ?id=...
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('id')) {
        window.invitationId = urlParams.get('id');
        console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ ID:', window.invitationId);
    }
    
    // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
    if (!window.invitationSlug && !window.invitationId) {
        console.log('–ù–µ —É–∫–∞–∑–∞–Ω slug –∏–ª–∏ ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è');
    }
</script>
    <script src="../js/invitation.js"></script>
</body>

</html>